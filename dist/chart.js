/*! version: 0.0.1 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("chart",[],e):"object"==typeof exports?exports.chart=e():t.chart=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=e.Pie=void 0,n(2);var o=n(3),r=i(o),a=n(6),s=i(a);e.Pie=r["default"],e.Line=s["default"]},function(t,e){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){o=!0,r=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(4),s=i(a),u=n(5),l=i(u),c=Math.PI,f={renderDate:[],radius:100,textRadius:120,outRadius:0,position:[160,160]};e["default"]={render:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=Object.assign({},f,e),i=n.renderDate,a=n.radius,u=n.textRadius,h=n.outRadius,p=n.position,d=i.reduce(function(t,e){return t.count+e.count}),v=0-c/2;i.map(function(t){return s["default"].assignWith(t,{radius:a,textRadius:u,outRadius:h})}),i.map(function(e,n){var i=e.count,s=e.outRadius,f=e.texture,h=v,y=i/d*c*2+h,g=(y-h+c)/2+v,m=void 0,b=void 0;t.save(),t.fillStyle=f,t.strokeStyle=f,t.beginPath();var x=new l["default"](p,s).pos(g),w=r(x,2);m=w[0],b=w[1],t.moveTo(m,b),t.arc(m,b,a,h,y,!1),t.closePath(),t.fill(),t.stroke(),t.restore();var k=void 0;t.save(),t.fillStyle="#333",t.strokeStyle="#333",t.beginPath(),k=new l["default"](p,a/2+s).pos(g),t.moveTo.apply(t,o(k)),k=new l["default"](p,u+s).pos(g),t.lineTo.apply(t,o(k)),k[0]=k[0]+(n?-15:15),t.lineTo.apply(t,o(k)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo.apply(t,o(k)),t.arc.apply(t,o(k).concat([3,0,2*c,!1])),t.closePath(),t.fillStyle="#333",t.fill();var O=i+"枚";k[0]=k[0]+(n?-6:6),k[1]=k[1]+5,t.moveTo.apply(t,o(k)),t.font="10px Arial",t.textAlign=n?"right":"left",console.log(t.textAlign),t.fillStyle="#333",t.fillText.apply(t,[O].concat(o(k))),t.restore(),v=y})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={assignWith:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&!t[i]&&(t[i]=n[i])}return t},max:Math.max,min:Math.min}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){o=!0,r=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=Math.sin,a=Math.cos,s=function(){function t(e,o){n(this,t);var r=i(e,2),a=r[0],s=r[1];Object.assign(this,{origin:e,radius:o,posX:a,posY:s})}return o(t,[{key:"pos",value:function(t){var e=this.posX+r(t)*this.radius,n=this.posY-a(t)*this.radius;return[e,n]}}]),t}();e["default"]=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),u=i(s),l=n(7),c=i(l),f=n(8),h=i(f),p={renderData:[{count:1,name:1},{count:2,name:2},{count:3,name:3},{count:4,name:4},{count:5,name:5},{count:6,name:6},{count:7,name:7},{count:8,name:8},{count:9,name:9},{count:10,name:10}],width:300,height:250,position:[0,0],padding:40,minUnitWidth:40},d=function(){function t(e,n){r(this,t);var i=Object.assign({},p,n),a=i.renderData,s=i.position,l=i.width,f=i.height,h=i.padding,d=i.minUnitWidth,v=[s[0]+h,s[1]+f-h];this.ctx=e,this.options=i,this.position=s,this.graph={origin:v,width:l-h,height:f-h},this.ctl={offsetX:0,offsetLeft:0,limitPos:[],limitIndex:[1,6],sum:a.reduce(function(t,e){return(t.count?t.count:t)+e.count}),maxUnitCount:{x:u["default"].min(Math.ceil((l-h)/d),a.length),y:u["default"].max.apply(u["default"],o(a.map(function(t){return t.count})))+1}};var y=this.getUnitX(),g=this.getUnitY();this.coor=new c["default"]({origin:v,unitX:y,unitY:g})}return a(t,[{key:"initialData",value:function(){var t=this,e=this.options.renderData,n=this.ctl,i=n.limitIndex,o=n.offsetLeft,r=this.getUnitX(),a=e.map(function(t){return Object.assign({},t)}),s=i.map(function(e,n){return t.coor.pos(e,0)[0]+r/2*(n?1:-1)+o}),u=Math.round(this.ctl.offsetLeft/r);this.ctl.limitPos=s,this.ctl.offsetX=u,this.coor.clear(),a.map(function(e,n){var i=e.name,o=e.count,u=n+1,l=e.count,c=0,f=t.coor.add(u,l,{index:n,count:o,name:i,overflow:c,cross:null});if(f.posX<s[0]?f.attrs.overflow=-Math.ceil((s[0]-f.posX)/r):f.posX>s[1]&&(f.attrs.overflow=Math.ceil((f.posX-s[1])/r)),f.attrs.overflow===-1&&a[n+1]){var h=t.coor.point(n+2,a[n+1].count),p=s[0],d=(h.posY-f.posY)/(h.posX-f.posX),v=isFinite(d)?f.posY+d*(p-f.posX):f.posY;f.attrs.cross=t.coor.fromPos(p,v)}else if(1===f.attrs.overflow&&a[n-1]){var y=t.coor.point(n,a[n-1].count),g=s[1],m=(y.posY-f.posY)/(y.posX-f.posX),b=isFinite(m)?f.posY+m*(g-f.posX):f.posY;f.attrs.cross=t.coor.fromPos(g,b)}})}},{key:"render",value:function(){this.initialData(),this.renderAxies(),this.renderComment(),this.ctx.save(),this.ctx.translate(-this.ctl.offsetLeft,0),this.renderRegion(),this.renderPoints(),this.ctx.restore()}},{key:"renderAxies",value:function(){for(var t=this.ctl.maxUnitCount.x,e=this.ctl.maxUnitCount.y,n=t+1,i=e+1,o=this.coor;i--;){var r=o.pos(0,i),a=[this.graph.origin[0]+this.graph.width,r[1]];this.line(r,a,{color:"#999"})}for(;n--;){var s=o.pos(n,0),u=o.pos(n,0);u[1]=u[1]-5,this.line(s,u,{color:"#666"})}}},{key:"renderComment",value:function(){var t=this.options.padding,e=this.ctl,n=e.offsetX,i=e.limitIndex,o=this.ctl.maxUnitCount.y,r=this.ctl.maxUnitCount.x,a=this.coor,s=a.points,l=u["default"].min(r,i[1])-1,c=o,f=null;for(f=a.point(l+1,0).offset(0,t/4*3).pos,this.text("7月/日",f),f=a.point(0,c).offset(-t/4*3,0).pos,this.text("枚/",f);l>-1;){if(s[l+n]){var h=s[l+n].attrs;f=a.point(l+1,0).offset(0,t/3).pos,this.text(h.name,f)}l--}for(;c>-1;)f=a.point(0,c).offset(-t/3,0).pos,this.text(c,f),c--}},{key:"renderRegion",value:function(){var t=this.coor,e=t.points,n=e.filter(function(t){return 0===t.attrs.overflow||t.attrs.cross}).map(function(t){return t.attrs.cross||t}),i=n[0].copy().setY(0),o=n[n.length-1].copy().setY(0);n.length>1&&(n.push(o,i),this.polygons(n.map(function(t){return t.pos}),{fillStyle:"rgba(127,170,126,.3)",strokeStyle:"rgb(127,170,126)"}))}},{key:"renderPoints",value:function(){var t=this,e=this.coor.points,n=e.length,i=this.ctx;e.map(function(r){var a=r.attrs,s=a.count,u=a.x,l=a.overflow;if(!l){var c=r.pos;i.save(),i.beginPath(),i.moveTo.apply(i,o(c)),i.arc.apply(i,o(c).concat([3,0,2*Math.PI])),i.closePath(),i.fillStyle="#6cab6b",i.fill(),i.restore();var f=-12;u>0&&u<n-1&&s<e[u-1].attrs.count&&(f=13),c=r.copy().offset(0,f).pos,t.text(s,c,{fillStyle:"#71b070"})}})}},{key:"text",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=n.fillStyle,o=void 0===i?"#999":i,r=this.ctx,a=e[0],s=e[1]+5;r.save(),r.textAlign="center",r.font="10px Arial",r.fillStyle=o,r.fillText(t,a,s),r.restore()}},{key:"line",value:function(t,e,n){var i=n.color,r=n.width,a=void 0===r?1:r,s=this.ctx;s.save(),s.beginPath(),s.moveTo.apply(s,o(t)),s.lineWidth=a,s.lineTo.apply(s,o(e)),s.strokeStyle=i,s.stroke(),s.restore()}},{key:"polygons",value:function(t,e){var n=e.fillStyle,i=e.strokeStyle,r=this.ctx;r.save(),r.beginPath();var a=t.shift();r.moveTo.apply(r,o(a));for(var s=t.length;s-- >2;)r.lineTo.apply(r,o(t.shift()));r.strokeStyle=i,r.stroke(),r.lineTo.apply(r,o(t.shift())),r.lineTo.apply(r,o(t.shift())),r.lineTo.apply(r,o(a)),r.fillStyle=n,r.fill(),r.closePath(),r.restore()}},{key:"getUnitX",value:function(){var t=u["default"].max(this.graph.width/this.ctl.maxUnitCount.x,this.options.minUnitWidth);return t}},{key:"getUnitY",value:function(){return(this.graph.height-5)/this.ctl.maxUnitCount.y}},{key:"getOffsetLeft",value:function(){return this.ctl.offsetLeft}},{key:"setOffsetLeft",value:function(t){var e=this.coor.unitX,n=this.ctl.limitIndex,i=1-e/2,o=e*(this.options.renderData.length-n[1]+n[0])-e/2-1;t=u["default"].max(i,u["default"].min(o,t)),this.ctl.offsetLeft=t}},{key:"swipeTo",value:function(t){var e=this,n=this.coor.unitX,i=n*t;(0,h["default"])(this.ctl).to({offsetLeft:i},600,"easeOutQuart").change(function(){e.clear(),e.render()}).run()}},{key:"clear",value:function(){var t,e=this.options,n=e.position,i=e.width,r=e.height,a=e.padding;(t=this.ctx).clearRect.apply(t,o(n).concat([i+a,r+a]))}}]),t}();e["default"]={init:function(t,e){return new d(t,e)},render:function(t,e){var n=new d(t,e);return n.render()}}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=0,r=function(){function t(e,i){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=arguments[3];n(this,t),this.x=e,this.y=i,this.attrs=r,this.props=a,this.id=o++,this.pos=[],this.posX=0,this.posY=0,this.calculate()}return i(t,[{key:"calculate",value:function(){var t=this.x,e=this.y,n=this.props,i=n.origin,o=n.unitX,r=n.unitY;this.posX=i[0]+o*t,this.posY=i[1]-r*e,this.pos=[this.posX,this.posY]}},{key:"setX",value:function(t){return this.x=t,this.calculate(),this}},{key:"setY",value:function(t){return this.y=t,this.calculate(),this}},{key:"offset",value:function(t,e){var n=this.props,i=n.origin,o=n.unitX,r=n.unitY;return this.posX+=t,this.posY+=e,this.x=(this.posX-i[0])/o,this.y=(i[1]-this.posY)/r,this.pos=[this.posX,this.posY],this}},{key:"copy",value:function(){return new t(this.x,this.y,this.attrs,this.props)}}]),t}(),a=function(){function t(e){n(this,t);var i=e.origin,o=e.unitX,a=e.unitY;this.unitX=o,this.unitY=a,this._origin=i,this.points=[],this.origin=new r(0,0,{},{origin:i,unitX:o,unitY:a})}return i(t,[{key:"point",value:function(t,e,n){var i=this._origin,o=this.unitX,a=this.unitY;return new r(t,e,n,{origin:i,unitX:o,unitY:a})}},{key:"pos",value:function(t,e){return this.point(t,e).pos}},{key:"fromPos",value:function(t,e,n){var i=this._origin,o=this.unitX,r=this.unitY;return this.point((t-i[0])/o,(i[1]-e)/r,n)}},{key:"add",value:function(t,e,n){var i=this.point(t,e,n);return this.points.push(i),i}},{key:"remove",value:function(t){var e=this.points.indexOf(t);return e>-1&&(this.points.splice(e,1)&&!0)}},{key:"clear",value:function(){this.points=[]}}]),t}();e["default"]=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){f=f.filter(function(t){var e=t.shift()();return!(e&&e.done)}),c(r)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e["default"]=function(t){return new h(t)};var s=n(9),u=i(s),l=30,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/l)}}(),f=[];r();var h=function(){function t(e){o(this,t),this.stack=[],this.callback=null,this.running=!1,this.done=!1,this.target=e,this._origin={},Object.assign(this._origin,e)}return a(t,[{key:"to",value:function(t,e){var n=this,i=arguments.length<=2||void 0===arguments[2]?u["default"].linear:arguments[2],o=void 0,r=this.stack;i.length?o=u["default"][i]||u["default"].linear:"function"==typeof i&&(o=i);for(var a=Math.ceil(e/l),s=this._origin,c=function(e){var i={};for(var u in t)if(t.hasOwnProperty(u)){var l=t[u]-s[u],c=e/a;i[u]=s[u]+l*o(c)}r.push(function(){Object.assign(n.target,i),n.callback&&n.callback(i)})},f=0;f<=a;f++)c(f);return r.push(function(){return Object.assign(n.target,t),n.callback&&n.callback(t),n.running=!1,n.done=!0,{done:!0}}),this}},{key:"run",value:function(){f.push(this.stack)}},{key:"stop",value:function(){this.stack.splice(0,this.stack.length-1)}},{key:"change",value:function(t){return"function"==typeof t&&(this.callback=t),this}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}}])});